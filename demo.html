<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sonyasha Payment Widget - UI Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .demo-container {
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 8px;
        }
        .subtitle {
            color: #666;
            text-align: center;
            margin-bottom: 32px;
        }
        .demo-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .demo-section h2 {
            color: #6AA570;
            margin-top: 0;
            margin-bottom: 16px;
        }
        .widget-container {
            display: flex;
            justify-content: center;
            padding: 20px 0;
        }
        .code-block {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 8px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 13px;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        .color-swatch {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 4px 8px 4px 0;
        }
        .color-box {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        .green { background: #6AA570; }
        .brown { background: #BF9773; }
        .yellow { background: #F1E38B; }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1>Sonyasha Payment Widget</h1>
        <p class="subtitle">UI Template Demo (Task 1.3)</p>

        <div class="demo-section">
            <h2>Color Palette</h2>
            <div>
                <span class="color-swatch"><span class="color-box green"></span> #6AA570 (Green)</span>
                <span class="color-swatch"><span class="color-box brown"></span> #BF9773 (Brown)</span>
                <span class="color-swatch"><span class="color-box yellow"></span> #F1E38B (Yellow)</span>
            </div>
        </div>

        <div class="demo-section">
            <h2>Widget Preview</h2>
            <div class="widget-container" id="widget-preview"></div>
        </div>

        <div class="demo-section">
            <h2>Error State</h2>
            <div class="widget-container" id="widget-error"></div>
        </div>

        <div class="demo-section">
            <h2>Usage Example</h2>
            <div class="code-block">&lt;!-- 1. Add container element --&gt;
&lt;div id="sonyasha-payment-widget"&gt;&lt;/div&gt;

&lt;!-- 2. Include widget script --&gt;
&lt;script src="payment-widget.js"&gt;&lt;/script&gt;

&lt;!-- 3. Configure and render --&gt;
&lt;script&gt;
SonyashaPaymentQR.configure({
    recipientName: 'ФОП Прізвище Імʼя По-батькові',
    iban: 'UA123456789012345678901234567',
    taxId: '1234567890',
    logoUrl: 'https://example.com/logo.png'
});

// Inject styles
SonyashaPaymentQR.injectStyles();

// Parse order data from page
const orderId = SonyashaPaymentQR.parseOrderId('.order-title');
const amount = SonyashaPaymentQR.parseAmount('.order-total');

if (orderId && amount) {
    const deeplinkUrl = SonyashaPaymentQR.buildDeeplinkUrl(orderId, amount);
    const html = SonyashaPaymentQR.buildTemplate({
        orderId: orderId,
        amount: amount,
        deeplinkUrl: deeplinkUrl
    });
    document.getElementById('sonyasha-payment-widget').innerHTML = html;
} else {
    const errors = [];
    if (!orderId) errors.push('Order ID not found');
    if (!amount) errors.push('Amount not found');
    document.getElementById('sonyasha-payment-widget').innerHTML =
        SonyashaPaymentQR.buildErrorTemplate(errors);
}
&lt;/script&gt;</div>
        </div>

        <div class="demo-section">
            <h2>Responsive Test</h2>
            <p style="color: #666; font-size: 14px;">
                Resize browser window below 480px to see mobile styles.
                The amount font changes from 42px to 36px, padding adjusts, etc.
            </p>
        </div>
    </div>

    <script src="payment-widget.js"></script>
    <script>
        // Configure widget
        SonyashaPaymentQR.configure({
            recipientName: 'ФОП Прізвище Імʼя По-батькові',
            iban: 'UA123456789012345678901234567',
            taxId: '1234567890',
            logoUrl: '',  // No logo for demo
            showPayButton: true
        });

        // Inject styles
        SonyashaPaymentQR.injectStyles();

        // Render normal widget
        const orderId = '36';
        const amount = 590;
        const deeplinkUrl = SonyashaPaymentQR.buildDeeplinkUrl(orderId, amount);

        document.getElementById('widget-preview').innerHTML = SonyashaPaymentQR.buildTemplate({
            orderId: orderId,
            amount: amount,
            deeplinkUrl: deeplinkUrl
        });

        // Render QR code
        SonyashaPaymentQR.renderQr('#sonyasha-qr', deeplinkUrl, function(err) {
            if (err) {
                console.error('QR render error:', err);
            } else {
                console.log('QR code rendered successfully!');
            }
        });

        // Render error state
        document.getElementById('widget-error').innerHTML = SonyashaPaymentQR.buildErrorTemplate([
            'Order ID not found in .h2 element',
            'Amount not found in .order-summary-b element'
        ]);
    </script>
</body>
</html>
